<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—à–∏–∫ - MobiWorld</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="index.html">
                <img src="Mobi.png" alt="MobiWorld Logo">
                <span class="logo-text">MobiWorld</span>
            </a>
        </div>
        <div class="header-buttons">
            <button class="auth-button" onclick="showAuthModal()">–£–≤—ñ–π—Ç–∏/–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
            <button class="cart-button" onclick="window.location.href='cart.html'">üõí –ö–æ—à–∏–∫</button>
        </div>
    </header>

    <main>
        <div class="container">
            <h1>–ö–æ—à–∏–∫</h1>
            <div id="cartItems" class="cart-items">
                <!-- –¢—É—Ç –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è —Ç–æ–≤–∞—Ä–∏ -->
            </div>
            <div class="cart-summary">
                <h2>–ü—ñ–¥—Å—É–º–æ–∫</h2>
                <p>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: <span id="totalPrice">0</span> –≥—Ä–Ω</p>
                <button class="checkout-button" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç–∏</h3>
                <p>Email: info@mobiworld.com</p>
                <p>–¢–µ–ª–µ—Ñ–æ–Ω: +380 (XX) XXX-XX-XX</p>
                <p>–ê–¥—Ä–µ—Å–∞: –º. –ö–∏—ó–≤, –≤—É–ª. –¢–µ—Ö–Ω—ñ—á–Ω–∞, 1</p>
            </div>
            <div class="footer-section">
                <h3>–ü—Ä–æ –Ω–∞—Å</h3>
                <p>MobiWorld - –≤–∞—à –Ω–∞–¥—ñ–π–Ω–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä —É –≤–∏–±–æ—Ä—ñ –º–æ–±—ñ–ª—å–Ω–∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω—ñ–≤. –ú–∏ –ø—Ä–æ–ø–æ–Ω—É—î–º–æ —à–∏—Ä–æ–∫–∏–π –≤–∏–±—ñ—Ä —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ñ–≤ –≤—ñ–¥ –ø—Ä–æ–≤—ñ–¥–Ω–∏—Ö –≤–∏—Ä–æ–±–Ω–∏–∫—ñ–≤ –∑–∞ –Ω–∞–π–∫—Ä–∞—â–∏–º–∏ —Ü—ñ–Ω–∞–º–∏.</p>
            </div>
            <div class="footer-section">
                <h3>–°–æ—Ü—ñ–∞–ª—å–Ω—ñ –º–µ—Ä–µ–∂—ñ</h3>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                    <a href="https://t.me/MobiWorldBest_bot" class="social-link"><i class="fab fa-telegram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 MobiWorld. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω–æ.</p>
        </div>
    </footer>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAuthModal()">&times;</span>
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">–£–≤—ñ–π—Ç–∏</button>
                <button class="auth-tab" onclick="switchAuthTab('register')">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            </div>
            <div id="loginForm" class="auth-form">
                <input type="email" id="loginEmail" placeholder="Email">
                <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                <button onclick="login()">–£–≤—ñ–π—Ç–∏</button>
            </div>
            <div id="registerForm" class="auth-form" style="display: none;">
                <input type="text" id="registerName" placeholder="–Ü–º'—è">
                <input type="email" id="registerEmail" placeholder="Email">
                <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                <input type="password" id="confirmPassword" placeholder="–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å">
                <button onclick="register()">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="auth.js"></script>
    <script src="cart.js"></script>
    <script>
    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –∑ URL
    function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        var results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–æ —Ç–æ–≤–∞—Ä–∏
    async function loadProducts() {
        try {
            const [phonesResponse, accessoriesResponse] = await Promise.all([
                fetch('phones.json'),
                fetch('accessories.json')
            ]);
            
            const phones = await phonesResponse.json();
            const accessories = await accessoriesResponse.json();
            
            return [...phones, ...accessories];
        } catch (error) {
            console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤:', error);
            return [];
        }
    }

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –≤ –∫–æ—à–∏–∫
    async function addProductFromUrl() {
        const productId = getUrlParameter('product');
        if (!productId) return;

        const products = await loadProducts();
        const product = products.find(p => p.id === productId);
        
        if (product) {
            // –î–æ–¥–∞—î–º–æ —Ç–æ–≤–∞—Ä –≤ –∫–æ—à–∏–∫
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.push({
                id: product.id,
                name: product.model || product.name,
                price: product.price,
                image: product.image,
                quantity: 1
            });
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–æ—à–∏–∫–∞
            updateCart();
            
            // –í–∏–¥–∞–ª—è—î–º–æ –ø–∞—Ä–∞–º–µ—Ç—Ä –∑ URL
            window.history.replaceState({}, document.title, window.location.pathname);
        }
    }

    // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    document.addEventListener('DOMContentLoaded', addProductFromUrl);
    </script>
</body>
</html> 